-- 基本服務與玩家
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local LocalPlayer = Players.LocalPlayer


-- GUI 主體
local ScreenGui = Instance.new("ScreenGui", game.CoreGui)
ScreenGui.Name = "MaolingHub"

local Frame = Instance.new("Frame", ScreenGui)
Frame.Size = UDim2.new(0, 400, 0, 300)
Frame.Position = UDim2.new(0.3, 0, 0.3, 0)
Frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Frame.Active = true
Frame.Draggable = true

Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 10)

local Title = Instance.new("TextLabel", Frame)
Title.Size = UDim2.new(1, -70, 0, 40)
Title.Position = UDim2.new(0, 10, 0, 0)
Title.BackgroundTransparency = 1
Title.Text = "貓玲的腳本區(>^ω^<) "
Title.Font = Enum.Font.GothamBold
Title.TextSize = 20
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextXAlignment = Enum.TextXAlignment.Left

local Close = Instance.new("TextButton", Frame)
Close.Size = UDim2.new(0, 30, 0, 30)
Close.Position = UDim2.new(1, -35, 0, 5)
Close.Text = "X"
Close.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
Close.TextColor3 = Color3.fromRGB(255, 255, 255)
Close.Font = Enum.Font.GothamBold
Close.TextSize = 16
Close.MouseButton1Click:Connect(function() ScreenGui:Destroy() end)

local Minimize = Instance.new("TextButton", Frame)
Minimize.Size = UDim2.new(0, 30, 0, 30)
Minimize.Position = UDim2.new(1, -70, 0, 5)
Minimize.Text = "-"
Minimize.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
Minimize.TextColor3 = Color3.fromRGB(255, 255, 255)
Minimize.Font = Enum.Font.GothamBold
Minimize.TextSize = 16

local SideBar = Instance.new("Frame", Frame)
SideBar.Size = UDim2.new(0, 100, 1, -40)
SideBar.Position = UDim2.new(0, 0, 0, 40)
SideBar.BackgroundColor3 = Color3.fromRGB(40, 40, 40)

local Content = Instance.new("Frame", Frame)
Content.Size = UDim2.new(1, -100, 1, -40)
Content.Position = UDim2.new(0, 100, 0, 40)
Content.BackgroundColor3 = Color3.fromRGB(50, 50, 50)

-- 縮小功能
local isMinimized = false
local fullSize = UDim2.new(0, 400, 0, 300)
local miniSize = UDim2.new(0, 400, 0, 40)
Minimize.MouseButton1Click:Connect(function()
	isMinimized = not isMinimized
	SideBar.Visible = not isMinimized
	Content.Visible = not isMinimized
	Frame.Size = isMinimized and miniSize or fullSize
end)

local function createButtonWithInput(text, order, parent, spacing, callback)
    -- 建立按鈕
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0, 160, 0, 30)
    btn.Position = UDim2.new(0.5, -125, 0, 10 + (order - 1) * spacing)
    btn.Text = text
    btn.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.Gotham
    btn.TextSize = 14
    btn.Parent = parent

local function createButtonWithInput(text, order, parent, spacing, callback)
    -- 建立外框容器
    local container = Instance.new("Frame")
    container.Size = UDim2.new(1, -10, 0, 30)
    container.BackgroundTransparency = 1
    container.LayoutOrder = order
    container.Parent = parent

    -- 建立按鈕
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0, 160, 1, 0)
    btn.Position = UDim2.new(0, 0, 0, 0)
    btn.Text = text
    btn.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.Gotham
    btn.TextSize = 14
    btn.Parent = container

    -- 建立輸入框
    local inputBox = Instance.new("TextBox")
    inputBox.Size = UDim2.new(0, 60, 1, 0)
    inputBox.Position = UDim2.new(0, 170, 0, 0)
    inputBox.Text = "1"
    inputBox.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    inputBox.TextColor3 = Color3.fromRGB(255, 255, 255)
    inputBox.Font = Enum.Font.Gotham
    inputBox.TextSize = 14
    inputBox.ClearTextOnFocus = false
    inputBox.Parent = container

    btn.MouseButton1Click:Connect(function()
        local count = tonumber(inputBox.Text) or 1
        for i = 1, count do
            callback()
        end
    end)

    return btn, inputBox
end




-- 傳送分區使用 ScrollingFrame
local EgglerScroll = Instance.new("ScrollingFrame", Content)
EgglerScroll.Size = UDim2.new(1, 0, 1, 0)
EgglerScroll.CanvasSize = UDim2.new(0, 0, 0, 385)  -- 高度設定視實際按鈕總高度
EgglerScroll.ScrollBarThickness = 6
EgglerScroll.BackgroundTransparency = 1
EgglerScroll.Visible = true
EgglerScroll.AutomaticCanvasSize = Enum.AutomaticSize.Y
EgglerScroll.VerticalScrollBarInset = Enum.ScrollBarInset.ScrollBar
EgglerScroll.ScrollingDirection = Enum.ScrollingDirection.Y

local layout = Instance.new("UIListLayout", EgglerScroll)
layout.SortOrder = Enum.SortOrder.LayoutOrder
layout.Padding = UDim.new(0, 5)



-- 分區按鈕


local Section3 = Instance.new("TextButton", SideBar)
Section3.Size = UDim2.new(1, 0, 0, 40)
Section3.Position = UDim2.new(0, 0, 0, 0)
Section3.Text = "手套"
Section3.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
Section3.TextColor3 = Color3.fromRGB(255, 255, 255)

G = {}

function G.potion(ingredients)
    -- 呼叫 GeneralAbility 的 FireServer
    game:GetService("ReplicatedStorage"):WaitForChild("GeneralAbility"):FireServer()

    local AlchemistEvent = game:GetService("ReplicatedStorage"):WaitForChild("AlchemistEvent")

    -- 依序加入並混合所有材料
    for _, item in ipairs(ingredients) do
        AlchemistEvent:FireServer("AddItem", item)
        AlchemistEvent:FireServer("MixItem", item)
    end

    -- 最後釀造藥水
    AlchemistEvent:FireServer("BrewPotion")
end


-- eggler手套分區
local EgglerButtons = {
	createButtonWithInput("1", 1, EgglerScroll, 35, function()
		G.potion{"Dark Root", "Dark Root", "Dark Root"}
	end)
}


-- 初始化時顯示分區的按鈕
for _, b in ipairs(EgglerButtons) do b.Visible = true end






